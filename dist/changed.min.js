!function(t,n){"function"==typeof define&&define.amd?define([],function(){return t.changed=n()}):t.changed=n()}(this,function(){"use strict";smokesignals={convert:function(t,n){return n={},t.on=function(e,o){return(n[e]||(n[e]=[])).push(o),t},t.once=function(n,e){function o(){e.apply(t.off(n,o),arguments)}return o.h=e,t.on(n,o)},t.off=function(e,o){for(var r=n[e],i=0;o&&r&&r[i];i++)r[i]!=o&&r[i].h!=o||r.splice(i--,1);return i||delete n[e],t},t.emit=function(e){for(var o=n[e],r=0;o&&o[r];)o[r++].apply(t,o.slice.call(arguments,1));return t},t}};var t=document,n=(t.documentElement,t.querySelectorAll.bind(t)),e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver||null,o=null!==e,r="onpropertychange"in document.createElement("div"),i=function(t){return Array.prototype.slice.call(t)},u=function(t,n){return n.indexOf(t)!==f},s=function(t){return t.slice(0)},c=function(t,n,e){var o;return function(){var r=this,i=arguments;clearTimeout(o),o=setTimeout(function(){o=null,e||t.apply(r,i)},n),e&&!o&&t.apply(r,i)}},l=10,a=500,f=-1,h=1,d=2,v=3,m="DOMContentLoaded",p=function(){smokesignals.convert(this)};p.prototype.initialize=function(){var t=this,n=function(){setTimeout(e,a)},e=function(){t.emit(h),n()};n()};var b=function(){var t={childList:!0,subtree:!0},n=function(t){return null!==t.addedNodes||null!==t.removedNodes},o=function(t){smokesignals.convert(this),this._selector=t};return o.prototype.initialize=function(){this._observer=new e(this._onMutation.bind(this)),this._observer.observe(document.body,t)},o.prototype._onMutation=c(function(t){t.some(n,this)&&this.emit(h)},l),o}(),g=function(){smokesignals.convert(this)},_={createObserver:function(){var t;return console.log("Created Observer: "),o?(t=b,console.log("native")):r?(t=g,console.log("IE")):(t=p,console.log("Interval")),new t}},y=function(){var e=_.createObserver(),o=function(t){var e=n(t);return i(e)},r=function(t,n){return t.filter(function(t){return!u(t,n)})};t.addEventListener(m,e.initialize.bind(e));var c=function(t){smokesignals.convert(this),this._selector=t,this._currentElements=[],e.on(h,this._onMutate.bind(this))};return c.prototype._onMutate=function(){var t,n,e=this._currentElements,i=o(this._selector);t=r(i,e),n=r(e,i),this._currentElements=i,t.length>0&&this._bubble(d,t),n.length>0&&this._bubble(v,n)},c.prototype._bubble=function(t,n){this.emit(t,s(n),this.elements)},Object.defineProperty(c.prototype,"elements",{get:function(){return s(this._currentElements)}}),c}(),E={event:{ELEMENTS_ADDED:d,ELEMENTS_REMOVED:v},watch:function(t){return new y(t)}};return E});