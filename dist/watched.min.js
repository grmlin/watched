/*!watched.js 0.4.0 - https://github.com/grmlin/watched - Licensed under MIT license*/!function(t,e){"function"==typeof define&&define.amd?define([],function(){return t.watched=e()}):t.watched=e()}(this,function(){"use strict";var t;t={convert:function(t,e){return e={},t.on=function(n,r){return(e[n]||(e[n]=[])).push(r),t},t.once=function(e,n){function r(){n.apply(t.off(e,r),arguments)}return r.h=n,t.on(e,r)},t.off=function(n,r){for(var i=e[n],u=0;r&&i&&i[u];u++)i[u]!=r&&i[u].h!=r||i.splice(u--,1);return u||delete e[n],t},t.emit=function(n){for(var r=e[n],i=0;r&&r[i];)r[i++].apply(t,r.slice.call(arguments,1));return t},t}};var e=!0,n=!1,r="function",i="string",u=20,o=500,c=-1,s=1,a=2,f=3,l="DOMContentLoaded",h="querySelectorAll",v="querySelector",d="getElementsByTagName",p="getElementsByClassName",_=[h,v,d,p],y=document,m=MutationObserver||WebKitMutationObserver||MozMutationObserver||null,b=null!==m,g=function(t){if("complete"===y.readyState)setTimeout(t,1);else{var e=function(){y.removeEventListener(l,e,n),t()};y.addEventListener(l,e,n)}},E=function(t){return _.some(function(e){return typeof t[e]!==r})},A=function(t){return Array.prototype.slice.call(t)},M=function(t,e){return e.indexOf(t)!==c},w=function(t){return t.slice(0)},O=function(t,e,n){var r;return function(){var i=this,u=arguments;clearTimeout(r),r=setTimeout(function(){r=null,n||t.apply(i,u)},e),n&&!r&&t.apply(i,u)}},q=function(){var n=y.getElementsByTagName("*"),r=function(){return A(n)},i=function(t,n){return t.length!==n.length?e:t.some(function(t,e){return t!==n[e]})},u=function(){t.convert(this),this._currentElements=r()};return Object.defineProperties(u.prototype,{initialize:{value:function(){var t=this,e=function(){setTimeout(n,o)},n=function(){t._checkDom(),e()};e()}},_checkDom:{value:function(){var t=r();i(this._currentElements,t)&&(this._currentElements=t,this.emit(s))}}}),u}(),T=function(){var n={childList:e,subtree:e},r=function(t){return null!==t.addedNodes||null!==t.removedNodes},i=function(){t.convert(this)};return Object.defineProperties(i.prototype,{initialize:{value:function(){this._observer=new m(this._onMutation.bind(this)),this._observer.observe(y.body,n)}},_onMutation:{value:O(function(t){t.some(r,this)&&this.emit(s)},u)}}),i}(),j=function(){var t={};return t[h]=function(t,e){return function(){var n=t[h](e);return A(n)}},t[v]=function(t,e){return function(){var n=t[v](e);return null===n?[]:[n]}},t[d]=function(t,e){var n=t[d](e);return function(){return A(n)}},t[p]=function(t,e){var n=t[p](e);return function(){return A(n)}},{create:function(e,n,r){return t[e](n,r)}}}(),L=function(t){this._query=t,this._old=[]};Object.defineProperties(L.prototype,{old:{value:function(){return w(this._old)}},current:{value:function(){return this._old=this._query(),w(this._old)}}});var N=function(t){if(E(t))throw new TypeError("changed.js: the element to watch has to be a HTMLElement!");this._el=t};_.forEach(function(t){Object.defineProperty(N.prototype,t,{value:function(e){var n=j.create(t,this._el,e),r=new L(n);return new P(r)}})});var P=function(){var r=function(){return new(b?T:q)}(),i=function(t,e){return t.filter(function(t){return!M(t,e)})};g(r.initialize.bind(r));var u=function(e){t.convert(this),this._isActive=n,this._length=0,this._query=e,this._onMutateHandler=this._onMutate.bind(this),this.resume()};return Object.defineProperties(u.prototype,{_onMutate:{value:function(){var t,e,n=this._query.old(),r=this._query.current();t=i(r,n),e=i(n,r),this._updateArray(r),this._bubble(a,t),this._bubble(f,e)}},_updateArray:{value:function(t){this._deleteArray(),this._length=t.length,t.forEach(function(t,e){this[e]=t},this)}},_deleteArray:{value:function(){this.forEach(function(t,e){delete this[e]},this),this.length=0}},_bubble:{value:function(t,e){e.length>0&&this.emit(t,e)}},added:{value:function(t){this.on(a,t)}},removed:{value:function(t){this.on(f,t)}},forEach:{value:function(){Array.prototype.forEach.apply(this,arguments)}},pause:{value:function(){this._isActive=n,r.off(s,this._onMutateHandler)}},resume:{value:function(){this._isActive||(this._isActive=e,this._updateArray(this._query.current()),r.on(s,this._onMutateHandler))}},length:{get:function(){return this._length}},splice:{value:function(){}}}),u}(),z=function(t){return typeof t===i?new N(y).querySelectorAll(t):new N(t)};return z});