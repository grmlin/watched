/*!watched.js 0.3.1 - (c) 2014-2015 Andreas Wehr - https://github.com/grmlin/watched - Licensed under MIT license*/
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.watched=e()}}(function(){return function e(t,n,r){function i(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t){(function(n){var r,i=!1;"smokesignals"in n&&(i=!0,r=n.smokesignals),e("./smokesignals"),t.exports=smokesignals,i?n.smokesignals=r:delete n.smokesignals}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./smokesignals":2}],2:[function(){smokesignals={convert:function(e,t){return t={},e.on=function(n,r){return(t[n]||(t[n]=[])).push(r),e},e.once=function(t,n){function r(){n.apply(e.off(t,r),arguments)}return r.h=n,e.on(t,r)},e.off=function(n,r){for(var i=t[n],o=0;r&&i&&i[o];o++)i[o]!=r&&i[o].h!=r||i.splice(o--,1);return o||delete t[n],e},e.emit=function(n){for(var r=t[n],i=0;r&&r[i];)r[i++].apply(e,r.slice.call(arguments,1));return e},e}}},{}],3:[function(e,t){var n=(e("./util/helper"),e("./util/constants")),r=(e("./LiveNodeList"),e("./domQueries/QueryStrategyFactory")),i=e("./ModuleFactory");DomQuery=e("./domQueries/DomQuery");var o={__name__:"DomElement",init:function(e){this.el=e}};n.AVAILABLE_QUERIES.forEach(function(e){o[e]=function(t){var n=r.create(e,this.el,t);return i.createLiveNodeList(n)}}),t.exports=o},{"./LiveNodeList":4,"./ModuleFactory":5,"./domQueries/DomQuery":6,"./domQueries/QueryStrategyFactory":7,"./util/constants":10,"./util/helper":11}],4:[function(e,t){var n=e("smokesignals"),r=e("./util/constants"),i=e("./util/helper"),o=e("./observers/NativeObserver"),s=e("./observers/IntervalObserver"),u=Object.create(i.hasMutationObserver?o:s);u.init();var a=function(e,t){return e.filter(function(e){return!i.arrayContains(t,e)})},c={__name__:"LiveNodeList",init:function(e){this._isActive=!1,this._length=0,this._query=e,this._onMutateHandler=this._onMutate.bind(this),this.resume()},_onMutate:function(){var e,t,n,i,o=this._query.old(),s=this._query.current();e=a(s,o),t=a(o,s),this._updateArray(s),n=e.length>0,i=t.length>0,(n||i)&&this._bubble(r.CUSTOM_EVENT_ON_ELEMENTS_CHANGED,s),n&&this._bubble(r.CUSTOM_EVENT_ON_ELEMENTS_ADDED,e),i&&this._bubble(r.CUSTOM_EVENT_ON_ELEMENTS_REMOVED,t)},_updateArray:function(e){this._deleteArray(),this._length=e.length,e.forEach(function(e,t){this[t]=e},this)},_deleteArray:function(){Array.prototype.splice.call(this,0),this._length=0},_bubble:function(e,t){this.emit(e,t)},forEach:function(){Array.prototype.forEach.apply(this,arguments)},pause:function(){this._isActive=!1,u.off(r.CUSTOM_EVENT_ON_MUTATION,this._onMutateHandler)},resume:function(){this._isActive||(this._isActive=!0,this._updateArray(this._query.current()),u.on(r.CUSTOM_EVENT_ON_MUTATION,this._onMutateHandler))}};Object.defineProperty(c,"length",{get:function(){return this._length},set:function(){}}),n.convert(c),t.exports=c},{"./observers/IntervalObserver":8,"./observers/NativeObserver":9,"./util/constants":10,"./util/helper":11,smokesignals:1}],5:[function(e,t){var n=e("./DomElement"),r=e("./LiveNodeList"),i=e("./domQueries/DomQuery");t.exports={createDomElement:function(e){if(this instanceof t.exports)throw new Error("The DomElement is a factory function, not a constructor. Don't use the new keyword with it");if(helper.isInvalidDomElement(e))throw new TypeError("The element to watch has to be a HTMLElement! The type of the given element is "+typeof e);var r=Object.create(n);return r.init(e),r},createLiveNodeList:function(e){if(this instanceof t.exports)throw new Error("The LiveNodeList is a factory function, not a constructor. Don't use the new keyword with it");var n=Object.create(i),o=Object.create(r);return n.init(e),o.init(n),o}}},{"./DomElement":3,"./LiveNodeList":4,"./domQueries/DomQuery":6}],6:[function(e,t){var n=e("../util/helper"),r={init:function(e){this._query=e,this._old=[]},old:function(){return n.arrayClone(this._old)},current:function(){return this._old=this._query(),n.arrayClone(this._old)}};t.exports=r},{"../util/helper":11}],7:[function(e,t){var n=e("../util/constants"),r=e("../util/helper"),i={},o=function(e){return e.filter(function(e){return document.contains(e)})};i[n.queries.QUERY_SELECTOR_ALL]=function(e,t){return function(){var i=e[n.queries.QUERY_SELECTOR_ALL](t);return o(r.nodeListToArray(i))}},i[n.queries.QUERY_SELECTOR]=function(e,t){return function(){var r=e[n.queries.QUERY_SELECTOR](t);return o(null===r?[]:[r])}},i[n.queries.GET_ELEMENTS_BY_TAG_NAME]=function(e,t){var i=e[n.queries.GET_ELEMENTS_BY_TAG_NAME](t);return function(){return o(r.nodeListToArray(i))}},i[n.queries.GET_ELEMENTS_BY_CLASS_NAME]=function(e,t){var i=e[n.queries.GET_ELEMENTS_BY_CLASS_NAME](t);return function(){return o(r.nodeListToArray(i))}},t.exports={create:function(e,t,n){return i[e](t,n)}}},{"../util/constants":10,"../util/helper":11}],8:[function(e,t){var n=e("smokesignals"),r=e("../util/helper"),i=e("../util/constants"),o=document.getElementsByTagName("*"),s=function(){return r.nodeListToArray(o)},u=function(e,t){return e.length!==t.length?!0:e.some(function(e,n){return e!==t[n]})},a={init:function(){this._currentElements=s(),this._initialize()},_initialize:function(){var e=this,t=function(){setTimeout(n,i.INTERVAL_OBSERVER_RESCAN_INTERVAL)},n=function(){e._checkDom(),t()};t()},_checkDom:function(){var e=s();u(this._currentElements,e)&&(this._currentElements=e,this.emit(i.CUSTOM_EVENT_ON_MUTATION))}};n.convert(a),t.exports=a},{"../util/constants":10,"../util/helper":11,smokesignals:1}],9:[function(e,t){var n=e("smokesignals"),r=e("../util/helper"),i=e("../util/constants"),o={childList:!0,subtree:!0},s=function(e){return null!==e.addedNodes||null!==e.removedNodes},u={init:function(){this._observer=new r.NativeMutationObserver(this._onMutation.bind(this)),this._observer.observe(document,o)},_onMutation:r.debounce(function(e){e.some(s,this)&&this.emit(i.CUSTOM_EVENT_ON_MUTATION)},i.MUTATION_DEBOUNCE_DELAY)};n.convert(u),t.exports=u},{"../util/constants":10,"../util/helper":11,smokesignals:1}],10:[function(e,t){var n={MUTATION_DEBOUNCE_DELAY:20,INTERVAL_OBSERVER_RESCAN_INTERVAL:500,CUSTOM_EVENT_ON_MUTATION:"CUSTOM_EVENT_ON_MUTATION",CUSTOM_EVENT_ON_ELEMENTS_ADDED:"added",CUSTOM_EVENT_ON_ELEMENTS_REMOVED:"removed",CUSTOM_EVENT_ON_ELEMENTS_CHANGED:"changed",AVAILABLE_QUERIES:[],queries:{QUERY_SELECTOR_ALL:"querySelectorAll",QUERY_SELECTOR:"querySelector",GET_ELEMENTS_BY_TAG_NAME:"getElementsByTagName",GET_ELEMENTS_BY_CLASS_NAME:"getElementsByClassName"}};Object.keys(n.queries).forEach(function(e){n.AVAILABLE_QUERIES.push(n.queries[e])}),t.exports=n},{}],11:[function(e,t){var n=e("./constants"),r=-1,i=!!(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver),o=i?MutationObserver||WebKitMutationObserver||MozMutationObserver:null;t.exports={hasMutationObserver:i,NativeMutationObserver:o,isInvalidDomElement:function(e){return e?n.AVAILABLE_QUERIES.some(function(t){return"function"!=typeof e[t]}):!0},nodeListToArray:function(e){return Array.prototype.slice.call(e)},arrayContains:function(e,t){return e.indexOf(t)!==r},arrayClone:function(e){return e.slice(0)},debounce:function(e,t,n){var r;return function(){var i=this,o=arguments;clearTimeout(r),r=setTimeout(function(){r=null,n||e.apply(i,o)},t),n&&!r&&e.apply(i,o)}}}},{"./constants":10}],12:[function(e,t){var n=e("./ModuleFactory");t.exports=function(e){if(this instanceof t.exports)throw new Error("watched is a factory function, not a constructor. Don't use the new keyword with it");return"string"==typeof e?n.createDomElement(document).querySelectorAll(e):n.createDomElement(e)}},{"./ModuleFactory":5}]},{},[12])(12)});