/*!watched.js 0.3.0 - (c) 2014 Andreas Wehr - https://github.com/grmlin/watched - Licensed under MIT license*/!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.watched=e()}}(function(){return function e(t,n,r){function i(u,s){if(!n[u]){if(!t[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(o)return o(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[u]={exports:{}};t[u][0].call(l.exports,function(e){var n=t[u][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(e,t){(function(n){var r,i=!1;"smokesignals"in n&&(i=!0,r=n.smokesignals),e("./smokesignals"),t.exports=smokesignals,i?n.smokesignals=r:delete n.smokesignals}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./smokesignals":2}],2:[function(){smokesignals={convert:function(e,t){return t={},e.on=function(n,r){return(t[n]||(t[n]=[])).push(r),e},e.once=function(t,n){function r(){n.apply(e.off(t,r),arguments)}return r.h=n,e.on(t,r)},e.off=function(n,r){for(var i=t[n],o=0;r&&i&&i[o];o++)i[o]!=r&&i[o].h!=r||i.splice(o--,1);return o||delete t[n],e},e.emit=function(n){for(var r=t[n],i=0;r&&r[i];)r[i++].apply(e,r.slice.call(arguments,1));return e},e}}},{}],3:[function(e,t){var n=e("./util/helper"),r=e("./util/constants"),i=e("./LiveNodeList"),o=e("./domQueries/QueryStrategyFactory"),u=e("./domQueries/DomQuery"),s={__name__:"DomElement"};r.AVAILABLE_QUERIES.forEach(function(e){s[e]=function(t){var n=o.create(e,this.el,t),r=Object.create(u);return r.init(n),i(r)}}),t.exports=function(e){if(this instanceof t.exports)throw new Error("The DomElement is a factory function, not a constructor. Don't use the new keyword with it");if(n.isInvalidDomElement(e))throw new TypeError("The element to watch has to be a HTMLElement! The type of the given element is "+typeof e);var r=Object.create(s);return r.el=e,r}},{"./LiveNodeList":4,"./domQueries/DomQuery":5,"./domQueries/QueryStrategyFactory":6,"./util/constants":8,"./util/helper":9}],4:[function(e,t){var n=e("smokesignals"),r=e("./util/constants"),i=e("./util/helper"),o=e("./observers/NativeObserver"),u=function(){},s=Object.create(i.hasMutationObserver?o:u),a=function(e,t){return e.filter(function(e){return!i.arrayContains(t,e)})};s.init();var c={__name__:"LiveNodeList",init:function(e){this._isActive=!1,this._length=0,this._query=e,this._onMutateHandler=this._onMutate.bind(this),this.resume()},_onMutate:function(){var e,t,n,i,o=this._query.old(),u=this._query.current();e=a(u,o),t=a(o,u),this._updateArray(u),n=e.length>0,i=t.length>0,(n||i)&&this._bubble(r.CUSTOM_EVENT_ON_ELEMENTS_CHANGED,u),n&&this._bubble(r.CUSTOM_EVENT_ON_ELEMENTS_ADDED,e),i&&this._bubble(r.CUSTOM_EVENT_ON_ELEMENTS_REMOVED,t)},_updateArray:function(e){this._deleteArray(),this._length=e.length,e.forEach(function(e,t){this[t]=e},this)},_deleteArray:function(){Array.prototype.splice.call(this,0),this._length=0},_bubble:function(e,t){this.emit(e,t)},forEach:function(){Array.prototype.forEach.apply(this,arguments)},pause:function(){this._isActive=!1,s.off(r.CUSTOM_EVENT_ON_MUTATION,this._onMutateHandler)},resume:function(){this._isActive||(this._isActive=!0,this._updateArray(this._query.current()),s.on(r.CUSTOM_EVENT_ON_MUTATION,this._onMutateHandler))}};Object.defineProperty(c,"length",{get:function(){return this._length},set:function(){}}),n.convert(c),t.exports=function(e){if(this instanceof t.exports)throw new Error("The LiveNodeList is a factory function, not a constructor. Don't use the new keyword with it");var n=Object.create(c);return n.init(e),n}},{"./observers/NativeObserver":7,"./util/constants":8,"./util/helper":9,smokesignals:1}],5:[function(e,t){var n=e("../util/helper"),r={init:function(e){this._query=e,this._old=[]},old:function(){return n.arrayClone(this._old)},current:function(){return this._old=this._query(),n.arrayClone(this._old)}};t.exports=r},{"../util/helper":9}],6:[function(e,t){var n=e("../util/constants"),r=e("../util/helper"),i={};i[n.queries.QUERY_SELECTOR_ALL]=function(e,t){return function(){var i=e[n.queries.QUERY_SELECTOR_ALL](t);return r.nodeListToArray(i)}},i[n.queries.QUERY_SELECTOR]=function(e,t){return function(){var r=e[n.queries.QUERY_SELECTOR](t);return null===r?[]:[r]}},i[n.queries.GET_ELEMENTS_BY_TAG_NAME]=function(e,t){var i=e[n.queries.GET_ELEMENTS_BY_TAG_NAME](t);return function(){return r.nodeListToArray(i)}},i[n.queries.GET_ELEMENTS_BY_CLASS_NAME]=function(e,t){var i=e[n.queries.GET_ELEMENTS_BY_CLASS_NAME](t);return function(){return r.nodeListToArray(i)}},t.exports={create:function(e,t,n){return i[e](t,n)}}},{"../util/constants":8,"../util/helper":9}],7:[function(e,t){var n=e("smokesignals"),r=e("../util/helper"),i=e("../util/constants"),o={childList:!0,subtree:!0},u=function(e){return null!==e.addedNodes||null!==e.removedNodes},s={init:function(){this._observer=new r.NativeMutationObserver(this._onMutation.bind(this)),this._observer.observe(document,o)},_onMutation:r.debounce(function(e){e.some(u,this)&&this.emit(i.CUSTOM_EVENT_ON_MUTATION)},i.MUTATION_DEBOUNCE_DELAY)};n.convert(s),t.exports=s},{"../util/constants":8,"../util/helper":9,smokesignals:1}],8:[function(e,t){var n={MUTATION_DEBOUNCE_DELAY:20,INTERVAL_OBSERVER_RESCAN_INTERVAL:500,CUSTOM_EVENT_ON_MUTATION:"CUSTOM_EVENT_ON_MUTATION",CUSTOM_EVENT_ON_ELEMENTS_ADDED:"added",CUSTOM_EVENT_ON_ELEMENTS_REMOVED:"removed",CUSTOM_EVENT_ON_ELEMENTS_CHANGED:"changed",AVAILABLE_QUERIES:[],queries:{QUERY_SELECTOR_ALL:"querySelectorAll",QUERY_SELECTOR:"querySelector",GET_ELEMENTS_BY_TAG_NAME:"getElementsByTagName",GET_ELEMENTS_BY_CLASS_NAME:"getElementsByClassName"}};Object.keys(n.queries).forEach(function(e){n.AVAILABLE_QUERIES.push(n.queries[e])}),t.exports=n},{}],9:[function(e,t){var n=e("./constants"),r=-1,i=!!(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver),o=i?MutationObserver||WebKitMutationObserver||MozMutationObserver:null;t.exports={hasMutationObserver:i,NativeMutationObserver:o,isInvalidDomElement:function(e){return e?n.AVAILABLE_QUERIES.some(function(t){return"function"!=typeof e[t]}):!0},nodeListToArray:function(e){return Array.prototype.slice.call(e)},arrayContains:function(e,t){return e.indexOf(t)!==r},arrayClone:function(e){return e.slice(0)},debounce:function(e,t,n){var r;return function(){var i=this,o=arguments;clearTimeout(r),r=setTimeout(function(){r=null,n||e.apply(i,o)},t),n&&!r&&e.apply(i,o)}}}},{"./constants":8}],10:[function(e,t){var n=e("./DomElement"),r=function(e){if(this instanceof r)throw new Error("watched is a factory function, not a constructor. Don't use the new keyword with it");return"string"==typeof e?n(document).querySelectorAll(e):n(e)};t.exports=r},{"./DomElement":3}]},{},[10])(10)});